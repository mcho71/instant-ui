# Instant UI - AI駆動UI生成 試作アプリ 要件定義書

## 1. プロジェクト概要

### 1.1 目的
Google Vertex AIのGemini Flash Liteモデルを使用し、ユーザーアクションに応じて**高品質なUIを動的に生成**する試作アプリケーション。

### 1.2 主要な検証ポイント
- **品質**: 生成されるUIの完成度、機能性、デザイン
- **実用性**: 実際に使えるアプリケーションとしての完成度
- **柔軟性**: 様々なタイプのアプリUIを生成できるか

## 2. 機能要件

### 2.1 アプリランチャー
- デスクトップ風のアイコングリッド表示
- アプリケーションの種類がわかりやすいアイコンとラベル
- ホバー時の視覚的フィードバック

### 2.2 対象アプリケーション
1. **電卓** - 基本的な計算機能
2. **メモ帳** - テキスト編集と保存
3. **時計** - アナログ/デジタル表示
4. **天気** - 天気情報の表示
5. **TODOリスト** - タスク管理
6. **描画ツール** - 簡単なペイント機能

### 2.3 ウィンドウシステム
- ドラッグ可能なウィンドウ
- 閉じるボタン
- 複数ウィンドウの同時表示

## 3. 品質重視の設計

### 3.1 UI生成の品質基準
- **完全性**: すべての機能が正しく動作
- **デザイン**: モダンで統一感のある見た目
- **使いやすさ**: 直感的な操作性
- **エラー耐性**: 不正な入力への対処

### 3.2 プロンプトエンジニアリング
- 詳細で明確な指示
- UIパターンの事前定義
- エラーケースの考慮
- 日本語対応の徹底

## 4. システム構成

### 4.1 シンプルな構成
```
instant-ui/
├── package.json       # 依存関係
├── server.js          # Expressサーバー
├── .env              # 環境変数（APIキー等）
├── .env.example      # 環境変数のテンプレート
├── public/
│   ├── index.html    # メインページ
│   ├── js/
│   │   ├── app.js    # メインロジック
│   │   ├── ai-client.js    # AI通信
│   │   └── window-manager.js # ウィンドウ管理
│   └── assets/
│       └── icons/    # アプリアイコン
├── src/
│   └── vertex-ai.js  # Vertex AI接続
└── prompts/
    ├── system.txt    # システムプロンプト
    └── apps/         # アプリ別プロンプト
```

### 4.2 環境変数設定
```env
# .env.example
VERTEX_AI_PROJECT_ID=your-project-id
VERTEX_AI_LOCATION=asia-northeast1
VERTEX_AI_ACCESS_TOKEN=your-access-token
PORT=3000
```

### 4.3 データフロー
1. ユーザーがアプリアイコンをクリック
2. アプリタイプに応じたプロンプトを構築
3. Vertex AI APIにリクエスト（.envのトークン使用）
4. レスポンスを解析してUIを生成
5. ウィンドウ内に表示

## 5. AIプロンプト設計

### 5.1 システムプロンプト
```
あなたは高品質なWebアプリケーションUIを生成する専門家です。

要件：
1. Tailwind CSSを使用した美しいデザイン
2. 完全に機能するインラインJavaScript
3. 日本語ユーザー向けのUI
4. エラーハンドリングと入力検証
5. レスポンシブデザイン

出力形式：
{
  "html": "完全なHTMLコード",
  "script": "初期化用JavaScript",
  "styles": "追加のCSSが必要な場合",
  "metadata": {
    "title": "アプリ名",
    "defaultSize": { "width": 400, "height": 500 }
  }
}
```

### 5.2 アプリ別プロンプト例（電卓）
```
電卓アプリケーションを生成してください。

必須機能：
- 0-9の数字ボタン
- 四則演算（+、-、×、÷）
- 小数点対応
- クリア（C）とオールクリア（AC）
- イコール（=）で計算実行
- ディスプレイに計算過程を表示

デザイン要件：
- ボタンは押しやすい大きさ
- 数字は見やすいフォントサイズ
- 演算子ボタンは色分け
- 押下時のフィードバック

追加機能：
- キーボード入力対応
- 計算履歴（最新5件）
- エラー表示（0除算など）
```

## 6. 実装の重点

### 6.1 品質確保のアプローチ
- プロンプトの反復改善
- 生成されたUIの手動テスト
- ユーザーフィードバックの収集
- エッジケースの洗い出し

### 6.2 開発優先順位
1. 基本インフラの構築
2. Vertex AI接続の確立
3. 1つのアプリ（電卓）で品質を追求
4. プロンプトを洗練させる
5. 他のアプリに展開
6. 全体的な改善

## 7. 成功指標

### 7.1 品質指標
- **機能完成度**: 期待される機能がすべて動作
- **デザイン品質**: プロフェッショナルな見た目
- **エラー率**: 生成失敗率 < 10%
- **ユーザビリティ**: 説明なしで使える

### 7.2 技術指標
- **生成成功率**: 90%以上
- **コード品質**: 実行時エラーなし
- **API応答時間**: 実測値を記録

## 8. 試作アプリとしての制約

### 8.1 スコープの限定
- 認証機能なし（環境変数でのみ管理）
- データの永続化は最小限（LocalStorage）
- スケーラビリティは考慮外
- プロダクション品質は求めない

### 8.2 フォーカスエリア
- AIプロンプトの最適化
- UI生成品質の向上
- 基本的な動作の確認
- 将来性の評価

## 9. エラーハンドリング

### 9.1 API関連
- トークン無効時のエラー表示
- API制限到達時の通知
- ネットワークエラーの処理

### 9.2 UI生成関連
- 生成失敗時のフォールバック
- パース エラーの処理
- 実行時エラーのキャッチ

## 10. 将来の可能性

### 10.1 拡張アイデア
- ユーザーが自然言語でアプリをリクエスト
- 生成されたUIの保存と再利用
- アプリ間の連携
- カスタマイズ機能

### 10.2 学習事項
- 効果的なプロンプトパターン
- UI生成の限界と可能性
- 実用化への課題
- 改善の方向性